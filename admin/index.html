<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCM Pro Solutions</title>
    <link rel="stylesheet" href="styles.css"> 
    <style>
        /* Estilos bÃ¡sicos para o exemplo - Mova isso para o seu styles.css */
        .service-card, .portfolio-card {
            border: 1px solid #ccc;
            padding: 15px;
            margin-bottom: 20px;
            /* Adicione estilos para garantir que as imagens cabem */
        }
        .service-card img, .portfolio-card img {
            max-width: 100%;
            height: auto;
        }
    </style>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script> 
</head>
<body>

    <header>
        <h1>MCM Pro Solutions</h1>
        <nav>
            <ul>
                <li><a href="#">Home</a></li>
                <li><a href="#services-list-en">Services</a></li>
                <li><a href="#portfolio-list-en">Portfolio</a></li>
                </ul>
        </nav>
    </header>

    <section id="services-list-en">
        <h2>Nossos ServiÃ§os (Gerados pelo CMS)</h2>
        </section>

    <section id="portfolio-list-en">
        <h2>Nosso PortfÃ³lio (Gerado pelo CMS)</h2>
        </section>

    <footer>
        <p>&copy; 2025 MCM Pro Solutions. Todos os direitos reservados.</p>
    </footer>

    <script>
        // ðŸš¨ ðŸš¨ ðŸš¨ VOCÃŠ DEVE ATUALIZAR ESTAS LISTAS DE ARQUIVOS ðŸš¨ ðŸš¨ ðŸš¨
        
        // 1. LISTA DE ARQUIVOS DE SERVIÃ‡OS MARKDOWN (.md)
        // Coloque os nomes exatos de todos os seus arquivos de serviÃ§o (incluindo os recÃ©m-criados)
        const SERVICE_FILES = [
            '_index.md', // Deixe este para garantir que o _index seja processado primeiro
            'iniciaÃ§Ã£o-e-escopo.md',
            'initiation-scope-en.md',
            'schedule-time-management-en.md', 
            'teste-title-en.md' 
            // ADICIONE AQUI QUALQUER NOVO ARQUIVO DE SERVIÃ‡O QUE VOCÃŠ CRIAR
        ];
        
        // 2. LISTA DE ARQUIVOS DE PORTFÃ“LIO MARKDOWN (.md)
        // Substitua pelos nomes reais dos seus arquivos de portfÃ³lio (se houver)
        const PORTFOLIO_FILES = [
            // 'projeto-cozinha-en.md',
            // 'projeto-escritorio-en.md'
        ];
        // ðŸš¨ ðŸš¨ ðŸš¨ FIM DA ATUALIZAÃ‡ÃƒO MANUAL ðŸš¨ ðŸš¨ ðŸš¨


        /**
         * FunÃ§Ã£o que busca um arquivo Markdown (.md) e separa o Front Matter (metadados) do corpo (conteÃºdo).
         * @param {string} filePath - Caminho completo para o arquivo.
         * @returns {Promise<Object|null>} Um objeto com {metadata, htmlBody}
         */
        async function fetchAndParseMarkdown(filePath) {
            try {
                const response = await fetch(filePath);
                
                if (!response.ok) {
                    console.warn(`Arquivo nÃ£o encontrado ou erro HTTP: ${filePath}`);
                    return null;
                }
                
                const rawContent = await response.text();
                
                // Dividir o conteÃºdo nas linhas '---' para separar o Front Matter (YAML)
                const parts = rawContent.split('---');
                
                if (parts.length < 3) {
                    // Arquivo nÃ£o tem Front Matter, trata todo o conteÃºdo como corpo.
                    return { metadata: {}, htmlBody: marked.parse(rawContent) };
                }
                
                const yamlBlock = parts[1].trim(); // O Front Matter estÃ¡ entre o primeiro e o segundo '---'
                const markdownBody = parts.slice(2).join('---').trim(); // O resto Ã© o corpo Markdown

                // Converte o Markdown do corpo para HTML
                const htmlBody = marked.parse(markdownBody);

                // Uma maneira simples (nÃ£o completa) de extrair dados do YAML para metadados
                const metadata = {};
                yamlBlock.split('\n').forEach(line => {
                    const [key, value] = line.split(':').map(s => s.trim().replace(/^['"]|['"]$/g, ''));
                    if (key && value) {
                        metadata[key] = value;
                    }
                });

                return { metadata, htmlBody };

            } catch (error) {
                console.error(`Erro ao carregar ${filePath}:`, error);
                return null;
            }
        }


        /**
         * FunÃ§Ã£o principal para buscar e renderizar todos os arquivos de uma coleÃ§Ã£o.
         */
        async function loadContent(folder, files, containerId, cardClass) {
            const container = document.getElementById(containerId);
            if (!container) return;

            const contentPromises = files.map(fileName => 
                fetchAndParseMarkdown(`content/${folder}/${fileName}`)
            );

            const allParsedContent = (await Promise.all(contentPromises)).filter(item => item !== null);
            
            // Se houver campo 'order' no Front Matter, tente ordenar
            allParsedContent.sort((a, b) => (parseInt(a.metadata.order) || 0) - (parseInt(b.metadata.order) || 0));

            allParsedContent.forEach(item => {
                const { metadata, htmlBody } = item;
                
                // Extrai o caminho da imagem do Front Matter
                const imagePath = metadata.image ? metadata.image : '';

                // ConstrÃ³i o card
                const cardHtml = `
                    <div class="${cardClass}">
                        ${imagePath ? `<img src="${imagePath}" alt="${metadata.title || metadata.author || 'Image'}">` : ''}
                        <h3>${metadata.title || metadata.author || 'Sem TÃ­tulo'}</h3>
                        <p>${metadata.description || ''}</p>
                        ${htmlBody}
                    </div>
                `;
                container.innerHTML += cardHtml;
            });
        }

        // EXECUTA O CARREGAMENTO QUANDO A PÃGINA ESTIVER PRONTA
        document.addEventListener('DOMContentLoaded', () => {
            // Carrega ServiÃ§os em InglÃªs
            loadContent('services/en', SERVICE_FILES, 'services-list-en', 'service-card');
            
            // Carrega PortfÃ³lio em InglÃªs
            loadContent('portfolio/en', PORTFOLIO_FILES, 'portfolio-list-en', 'portfolio-card');
        });
    </script>
</body>
</html>